generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             Int                @id @default(autoincrement())
  name           String?
  email          String             @unique
  password       String
  createdAt      DateTime           @default(now())
  updatedAt      DateTime           @updatedAt
  bio            String?
  availabilities UserAvailability[]
  userSkills     UserSkill[]

  @@map("users")
}

model Skill {
  id          Int         @id @default(autoincrement())
  name        String      @unique
  description String?
  userSkills  UserSkill[]

  @@map("skills")
}

model UserSkill {
  id          Int               @id @default(autoincrement())
  userId      Int
  skillId     Int
  type        SkillType
  proficiency SkillProficiency?
  description String?
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt
  skill       Skill             @relation(fields: [skillId], references: [id])
  user        User              @relation(fields: [userId], references: [id])

  @@unique([userId, skillId, type])
  @@map("user_skills")
}

model UserAvailability {
  id        Int      @id @default(autoincrement())
  userId    Int
  dayOfWeek String?
  timeOfDay String?
  notes     String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  User      User     @relation(fields: [userId], references: [id])

  @@map("user_availabilities")
}

enum SkillType {
  OFFERED
  WANTED_TO_LEARN
}

enum SkillProficiency {
  BEGINNER
  INTERMEDIATE
  ADVANCED
  EXPERT
}
